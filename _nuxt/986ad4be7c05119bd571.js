(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{178:function(e,t,r){var content=r(180);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("e611ed62",content,!0,{sourceMap:!1})},179:function(e,t,r){"use strict";var n=r(178);r.n(n).a},180:function(e,t,r){(t=r(39)(!1)).push([e.i,"li{cursor:pointer}",""]),e.exports=t},181:function(e,t,r){"use strict";var n={name:"navbar"},o=(r(179),r(19)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg-gray-800 py-2 text-white  fixed w-full flex"},[r("ul",{staticClass:"px-10 flex"},[r("li",{staticClass:"mr-10",on:{click:function(t){return e.$router.push("/manage")}}},[e._v("Usuarios")]),e._v(" "),r("li",{staticClass:"mr-10",on:{click:function(t){return e.$router.push("/manage/uuaa")}}},[e._v("UUAAs")]),e._v(" "),r("li",{staticClass:"mr-10",on:{click:function(t){return e.$router.push("/manage/roles")}}},[e._v("Roles")]),e._v(" "),r("li",{staticClass:"mr-10",on:{click:function(t){return e.$router.push("/manage/permisos")}}},[e._v("Permisos")]),e._v(" "),r("li",{staticClass:"mr-5",on:{click:function(t){return e.$router.push("/")}}},[e._v("Cerrar sesión")])])])}),[],!1,null,null,null);t.a=component.exports},182:function(e,t,r){"use strict";var n=r(7),o=r(183)(5),c=!0;"find"in[]&&Array(1).find((function(){c=!1})),n(n.P+n.F*c,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r(73)("find")},183:function(e,t,r){var n=r(27),o=r(72),c=r(28),l=r(20),d=r(184);e.exports=function(e,t){var r=1==e,h=2==e,m=3==e,f=4==e,v=6==e,x=5==e||v,_=t||d;return function(t,d,k){for(var y,w,C=c(t),R=o(C),N=n(d,k,3),A=l(R.length),E=0,$=r?_(t,A):h?_(t,0):void 0;A>E;E++)if((x||E in R)&&(w=N(y=R[E],E,C),e))if(r)$[E]=w;else if(w)switch(e){case 3:return!0;case 5:return y;case 6:return E;case 2:$.push(y)}else if(f)return!1;return v?-1:m||f?f:$}}},184:function(e,t,r){var n=r(185);e.exports=function(e,t){return new(n(e))(t)}},185:function(e,t,r){var n=r(10),o=r(110),c=r(2)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[c])&&(t=void 0)),void 0===t?Array:t}},187:function(e,t,r){var content=r(193);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("01055931",content,!0,{sourceMap:!1})},192:function(e,t,r){"use strict";var n=r(187);r.n(n).a},193:function(e,t,r){(t=r(39)(!1)).push([e.i,"a{color:#3c5a7f}",""]),e.exports=t},201:function(e,t,r){"use strict";r.r(t);r(182),r(42),r(41);var n,o,c,l,d=r(5),h=r(29),m=r.n(h),f={components:{navbar:r(181).a},data:function(){return{editMode:!1,roles:[],isLoading:!1,addNewRole:!0,roleName:"",roleID:"",permissions:[],permissionsToAdd:[],roleData:[]}},mounted:function(){this.getRoles(),this.getPermissions()},methods:{getPermissions:(l=Object(d.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!1,e.prev=1,e.next=4,m.a.post("".concat("https://api-permisos.herokuapp.com/","getPermissions"),{}).then((function(e){e.data&&(t.permissions=e.data)}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),this.message="",this.$toast.error("El servidor no responde");case 10:return e.prev=10,this.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,6,10,13]])}))),function(){return l.apply(this,arguments)}),addRole:(c=Object(d.a)(regeneratorRuntime.mark((function e(){var t,i,r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.permissionsToAdd=[],t=document.querySelectorAll("#permission"),i=0;i<t.length;i++)t[i].checked&&(console.log(t[i].getAttribute("data-permission")),this.permissionsToAdd.push(t[i].getAttribute("data-permission")));return r={},r=this.editMode?{data:{_id:this.roleID,roleName:this.roleName,editMode:!0,permissions:this.permissionsToAdd}}:{data:{roleName:this.roleName,editMode:!1,permissions:this.permissionsToAdd}},e.prev=5,this.isLoading=!0,e.next=9,m.a.post("".concat("https://api-permisos.herokuapp.com/","addRole"),r).then((function(e){var t;"ROLE_EXISTS"==e.data.status?n.$toast.error("Este rol ya existe",{duration:5e3,position:"top-center"}):(n.getRoles(),t=n.editMode?"Rol modificado con éxito":"Se ha añadido el rol ".concat(n.roleName," con éxito"),n.$toast.success(t,{duration:5e3,position:"top-center"}),n.roleName="",n.editMode=!1,n.uncheckAll())}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),this.$toast.error("El servidor no responde",{duration:5e3,position:"top-center"});case 14:return e.prev=14,this.isLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[5,11,14,17]])}))),function(){return c.apply(this,arguments)}),deleteRole:(o=Object(d.a)(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!1,e.prev=1,e.next=4,m.a.post("".concat("https://api-permisos.herokuapp.com/","deleteRole"),{data:{_id:t}}).then((function(e){"ROLE_NOT_FOUND"==e.data.status?r.$toast.error("Este rol no existe.",{duration:5e3,position:"top-center"}):(r.roleName="",r.getRoles(),r.editMode,r.$toast.success("Se ha eliminado el rol con éxito",{duration:5e3,position:"top-center"}),r.uncheckAll())}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.$toast.error("El servidor no responde",{duration:5e3,position:"top-center"});case 9:return e.prev=9,this.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,6,9,12]])}))),function(e){return o.apply(this,arguments)}),getRoles:(n=Object(d.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!1,e.prev=1,e.next=4,m.a.post("".concat("https://api-permisos.herokuapp.com/","getRoles"),{}).then((function(e){e.data&&(t.roles=e.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.$toast.error("El servidor no responde");case 9:return e.prev=9,this.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,6,9,12]])}))),function(){return n.apply(this,arguments)}),cancel:function(){this.roleName="",this.editMode=!1,this.uncheckAll()},editRole:function(e){this.roleData=e,this.roleName=e.name,this.editMode=!0,this.roleID=e._id},checkHasPermission:function(e,t){var r=!1;return null!=t&&t.find((function(t){t==e&&(r=!0)})),r},uncheckAll:function(){}}},v=(r(192),r(19)),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("navbar"),e._v(" "),r("div",{staticClass:"bg-grey-100 h-screen flex "},[r("div",{staticClass:"w-full md:flex py-5 px-20 mt-10"},[r("div",{staticClass:"mt-3 w-full mr-5"},[e.editMode?r("h2",{staticClass:"text-xl mb-2"},[e._v("Editar rol")]):r("h2",{staticClass:"text-xl mb-2"},[e._v("Añadir un nuevo rol")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.roleName,expression:"roleName"}],staticClass:"appearance-none bg-gray-200 focus:outline-none py-2 px-2 w-full",attrs:{placeholder:"Nombre del rol...",spellcheck:"false",autofocus:"",autocomplete:"off",type:"text"},domProps:{value:e.roleName},on:{input:function(t){t.target.composing||(e.roleName=t.target.value)}}}),e._v(" "),r("ul",[r("strong",[e._v("Permisos de este rol:")]),e._v(" "),e._l(e.permissions,(function(t){return r("li",[r("input",{staticClass:"form-checkbox",attrs:{id:"permission","data-permission":t.name,type:"checkbox"},domProps:{checked:e.checkHasPermission(t.name,e.roleData.permissions)}}),e._v("\n                "+e._s(t.name)+"\n            ")])}))],2),e._v(" "),r("button",{staticClass:"bg-blue-600 px-5 text-white py-2 text-sm mt-3 w-full focus:outline-none",attrs:{disabled:""==e.roleName},on:{click:e.addRole}},[e.isLoading?r("span",[e._v("Espera...")]):r("span",[e._v("Guardar")])]),e._v(" "),r("button",{staticClass:"bg-gray-400 px-5 text-white py-2 text-sm mt-3 w-full focus:outline-none",on:{click:e.cancel}},[e._v("Cancelar")])]),e._v(" "),r("div",{staticClass:"mt-3 md:w-2/3"},[0==e.roles.length?r("p",{staticClass:"bg-orange-100 py-3 px-3 text-center"},[r("i",[e._v("No hay registros en la base de datos.")])]):r("table",{staticClass:"table-auto w-full"},[r("tbody",[r("h2",{staticClass:"text-xl mb-2"},[e._v("Gestión de roles")]),e._v(" "),e._l(e.roles,(function(t){return r("tr",[r("td",{staticClass:"border px-4 py-2"},[e._v(e._s(t.name))]),e._v(" "),r("td",{staticClass:"border px-4 py-2 text-center"},[r("a",{staticClass:"cursor-pointer",on:{click:function(r){return e.editRole(t)}}},[e._v("Editar")])]),e._v(" "),r("td",{staticClass:"border px-4 py-2 text-center"},[r("a",{staticClass:"cursor-pointer text-red-500",on:{click:function(r){return e.deleteRole(t._id)}}},[e._v("Eliminar")])])])}))],2)])])])])],1)}),[],!1,null,null,null);t.default=component.exports}}]);