(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{178:function(e,t,r){var content=r(180);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(41).default)("e611ed62",content,!0,{sourceMap:!1})},179:function(e,t,r){"use strict";var n=r(178);r.n(n).a},180:function(e,t,r){(t=r(40)(!1)).push([e.i,"li{cursor:pointer}",""]),e.exports=t},181:function(e,t,r){"use strict";var n={name:"navbar"},o=(r(179),r(19)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg-gray-800 py-2 text-white  fixed w-full flex"},[r("ul",{staticClass:"px-10 flex"},[r("li",{staticClass:"mr-10",on:{click:function(t){return e.$router.push("/manage")}}},[e._v("Usuarios")]),e._v(" "),r("li",{staticClass:"mr-10",on:{click:function(t){return e.$router.push("/manage/uuaa")}}},[e._v("UUAAs")]),e._v(" "),r("li",{staticClass:"mr-10",on:{click:function(t){return e.$router.push("/manage/roles")}}},[e._v("Roles")]),e._v(" "),r("li",{staticClass:"mr-5",on:{click:function(t){return e.$router.push("/")}}},[e._v("Cerrar sesiÃ³n")])])])}),[],!1,null,null,null);t.a=component.exports},182:function(e,t,r){"use strict";var n=r(7),o=r(183)(5),c=!0;"find"in[]&&Array(1).find((function(){c=!1})),n(n.P+n.F*c,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r(73)("find")},183:function(e,t,r){var n=r(27),o=r(72),c=r(28),l=r(20),d=r(184);e.exports=function(e,t){var r=1==e,h=2==e,v=3==e,f=4==e,m=6==e,_=5==e||m,x=t||d;return function(t,d,A){for(var U,k,y=c(t),R=o(y),C=n(d,A,3),w=l(R.length),L=0,$=r?x(t,w):h?x(t,0):void 0;w>L;L++)if((_||L in R)&&(k=C(U=R[L],L,y),e))if(r)$[L]=k;else if(k)switch(e){case 3:return!0;case 5:return U;case 6:return L;case 2:$.push(U)}else if(f)return!1;return m?-1:v||f?f:$}}},184:function(e,t,r){var n=r(185);e.exports=function(e,t){return new(n(e))(t)}},185:function(e,t,r){var n=r(10),o=r(110),c=r(2)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[c])&&(t=void 0)),void 0===t?Array:t}},196:function(e,t,r){"use strict";r.r(t);r(182),r(39);var n,o,c,l,d,h,v=r(5),f=r(29),m=r.n(f),_={components:{navbar:r(181).a},data:function(){return{users:[],message:"",editMode:!1,user:[],listUUAA:[],uuaaToAdd:[],userRole:"",isLoading:!1,roles:[],roleId:0}},mounted:function(){this.getUsers(),this.getRoles()},methods:{getUsers:(h=Object(v.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,e.next=4,m.a.get("".concat("https://api-permisos.herokuapp.com/","getUsers"),{}).then((function(e){e.data.users.length>0&&(t.users=e.data.users)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.message="El servidor no responde";case 9:return e.prev=9,this.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,6,9,12]])}))),function(){return h.apply(this,arguments)}),selectUser:(d=Object(v.a)(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,this.editMode=!0,e.prev=2,e.next=5,m.a.post("".concat("https://api-permisos.herokuapp.com/","getUser/").concat(t),{}).then((function(e){e.data&&(r.user=e.data)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.message="El servidor no responde";case 10:return e.prev=10,this.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,7,10,13]])}))),function(e){return d.apply(this,arguments)}),getRoles:(l=Object(v.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!1,e.prev=1,e.next=4,m.a.post("".concat("https://api-permisos.herokuapp.com/","getRoles"),{}).then((function(e){e.data&&(t.roles=e.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.$toast.error("El servidor no responde");case 9:return e.prev=9,this.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,6,9,12]])}))),function(){return l.apply(this,arguments)}),updateUUAAS:(c=Object(v.a)(regeneratorRuntime.mark((function e(){var t,i,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.isLoading=!0,t=document.querySelectorAll("#uuaa"),this.uuaaToAdd=[],i=0;i<t.length;i++)t[i].checked&&(console.log(t[i].getAttribute("data-uuaa")),this.uuaaToAdd.push(t[i].getAttribute("data-uuaa")));return console.log(this.uuaasToAdd),e.prev=5,e.next=8,m.a.post("".concat("https://api-permisos.herokuapp.com/","updateUUAAs"),{data:{uuaas:this.uuaaToAdd,userId:this.user._id}}).then((function(e){e.data&&r.$toast.success("Se han actualizado los permisos del usuario",{duration:2e3})}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.message="El servidor no responde";case 13:return e.prev=13,this.isLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[5,10,13,16]])}))),function(){return c.apply(this,arguments)}),checkHasUUAA:function(e,t){var r=!1;return null!=t&&t.find((function(t){t==e&&(console.log("found!!!"),r=!0)})),r},setUserRole:function(){event.target.value?(this.userRole=event.target.value,this.getRoleUUAAS(this.userRole)):this.listUUAA=[]},getRoleUUAAS:(o=Object(v.a)(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,console.log(this.userRole),e.prev=2,e.next=5,m.a.post("".concat("https://api-permisos.herokuapp.com/","getRoleUUAAS"),{data:{rolename:t}}).then((function(e){e.data&&(console.log(e.data),r.listUUAA=e.data)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.message="El servidor no responde";case 10:return e.prev=10,this.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,7,10,13]])}))),function(e){return o.apply(this,arguments)}),updateUserRole:(n=Object(v.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,console.log(this.userRole),e.prev=2,e.next=5,m.a.post("".concat("https://api-permisos.herokuapp.com/","updateUserRole"),{data:{userId:this.user._id,role:this.userRole}}).then((function(e){e.data&&t.$toast.success("Se ha actualizado el rol del usuario",{duration:2e3})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.message="El servidor no responde";case 10:return e.prev=10,this.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,7,10,13]])}))),function(){return n.apply(this,arguments)})}},x=r(19),component=Object(x.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("navbar"),e._v(" "),r("div",{staticClass:"bg-grey-100 h-screen md:flex "},[r("div",{staticClass:"w-full md:w-2/5  sm:px-5 py-5 mt-10"},[r("h1",{staticClass:"text-2xl"},[e._v("Gestionar usuarios")]),e._v(" "),r("table",{staticClass:"table-auto text-center"},[e._m(0),e._v(" "),r("tbody",e._l(e.users,(function(u){return r("tr",[r("td",[e._v("\n                        "+e._s(u.user)+"\n                    ")]),e._v(" "),r("td",[r("button",{staticClass:"text-white bg-red-400 text-sm px-4 py-1 focus:outline-none",class:{"bg-red-600":u._id==e.user._id},attrs:{disabled:e.isLoading},on:{click:function(t){return e.selectUser(u._id)}}},[e._v("Permisos")])])])})),0)])]),e._v(" "),r("div",{staticClass:"w-full py-5 mt-10"},[e.editMode?r("div",[r("h2",{staticClass:"text-xl"},[e._v(" Modificar permisos del usuario "+e._s(e.user.user))]),e._v(" "),r("strong",{staticClass:"text-gray-700 mr-3"},[e._v("Cambiar rol ")]),e._v(" "),r("select",{on:{change:e.setUserRole}},[r("option",{attrs:{selected:"",value:""}},[e._v("Selecciona un rol")]),e._v(" "),e._l(e.roles,(function(t){return r("option",{attrs:{role_id:t._id},domProps:{selected:e.user.role==t.name,value:t.name}},[e._v(e._s(t.name))])}))],2),e._v(" "),r("button",{staticClass:"bg-blue-700 text-white py-1 px-4 mt-3",attrs:{disabled:""==e.userRole},on:{click:e.updateUserRole}},[e._v("Guardar")]),e._v(" "),r("hr",{staticClass:"mt-4 mb-4"}),e._v(" "),0==e.listUUAA.length?r("p",{staticClass:"bg-orange-100 py-3 px-3 text-center"},[r("i",[e._v("No hay registros en la base de datos.")])]):r("table",{staticClass:"table-auto text-center"},[e._m(1),e._v(" "),r("tbody",e._l(e.listUUAA.uuaas,(function(t,n){return r("tr",{key:t._id},[r("td",[e._v("\n                        "+e._s(t)+"\n                    ")]),e._v(" "),r("td",[r("label",{staticClass:"inline-flex items-center"},[r("input",{staticClass:"form-checkbox",attrs:{"data-uuaa":t.name,id:"uuaa",type:"checkbox"},domProps:{checked:e.checkHasUUAA(t.name,e.user.uuaas)},on:{click:e.updateUUAAS}}),e._v(" "),r("span",{staticClass:"ml-2"})])])])})),0)])]):r("div",{staticClass:"mt-10"},[e._v("\n            Selecciona un usuario en el listado de la izquierda para modificar sus permisos de UUAAs\n        ")])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticClass:"px-4 py-2"},[this._v("Usuario")]),this._v(" "),t("th",{staticClass:"px-4 py-2"},[this._v("Acciones")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticClass:"px-4 py-2"},[this._v("UUAA")]),this._v(" "),t("th",{staticClass:"px-4 py-2"},[this._v("Permitir acceso")])])])}],!1,null,null,null);t.default=component.exports}}]);